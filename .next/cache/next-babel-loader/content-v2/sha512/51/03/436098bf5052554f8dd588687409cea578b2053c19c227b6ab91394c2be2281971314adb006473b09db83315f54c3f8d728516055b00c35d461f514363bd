{"ast":null,"code":"import { getNowPlaying } from '../../lib/spotify';\nexport default (async (_, res) => {\n  const response = await getNowPlaying();\n\n  if (response.status === 204 || response.status > 400) {\n    return res.status(200).json({\n      isPlaying: false\n    });\n  }\n\n  const song = await response.json();\n  const isPlaying = song.is_playing;\n  const title = song.item.name;\n  const artist = song.item.artists.map(_artist => _artist.name).join(', ');\n  const album = song.item.album.name;\n  const albumImageUrl = song.item.album.images[0].url;\n  const songUrl = song.item.external_urls.spotify;\n  res.setHeader('Cache-Control', 'public, s-maxage=60, stale-while-revalidate=30');\n  return res.status(200).json({\n    album,\n    albumImageUrl,\n    artist,\n    isPlaying,\n    songUrl,\n    title\n  });\n});","map":{"version":3,"sources":["C:/Users/kaima/Documents/GitHub/mywebsite/pages/api/now-playing.js"],"names":["getNowPlaying","_","res","response","status","json","isPlaying","song","is_playing","title","item","name","artist","artists","map","_artist","join","album","albumImageUrl","images","url","songUrl","external_urls","spotify","setHeader"],"mappings":"AAAA,SAASA,aAAT,QAA8B,mBAA9B;AAEA,gBAAe,OAAOC,CAAP,EAAUC,GAAV,KAAkB;AAC/B,QAAMC,QAAQ,GAAG,MAAMH,aAAa,EAApC;;AAEA,MAAIG,QAAQ,CAACC,MAAT,KAAoB,GAApB,IAA2BD,QAAQ,CAACC,MAAT,GAAkB,GAAjD,EAAsD;AACpD,WAAOF,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAArB,CAAP;AACD;;AAED,QAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACE,IAAT,EAAnB;AACA,QAAMC,SAAS,GAAGC,IAAI,CAACC,UAAvB;AACA,QAAMC,KAAK,GAAGF,IAAI,CAACG,IAAL,CAAUC,IAAxB;AACA,QAAMC,MAAM,GAAGL,IAAI,CAACG,IAAL,CAAUG,OAAV,CAAkBC,GAAlB,CAAuBC,OAAD,IAAaA,OAAO,CAACJ,IAA3C,EAAiDK,IAAjD,CAAsD,IAAtD,CAAf;AACA,QAAMC,KAAK,GAAGV,IAAI,CAACG,IAAL,CAAUO,KAAV,CAAgBN,IAA9B;AACA,QAAMO,aAAa,GAAGX,IAAI,CAACG,IAAL,CAAUO,KAAV,CAAgBE,MAAhB,CAAuB,CAAvB,EAA0BC,GAAhD;AACA,QAAMC,OAAO,GAAGd,IAAI,CAACG,IAAL,CAAUY,aAAV,CAAwBC,OAAxC;AAEArB,EAAAA,GAAG,CAACsB,SAAJ,CACE,eADF,EAEE,gDAFF;AAKA,SAAOtB,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BY,IAAAA,KAD0B;AAE1BC,IAAAA,aAF0B;AAG1BN,IAAAA,MAH0B;AAI1BN,IAAAA,SAJ0B;AAK1Be,IAAAA,OAL0B;AAM1BZ,IAAAA;AAN0B,GAArB,CAAP;AAQD,CA5BD","sourcesContent":["import { getNowPlaying } from '../../lib/spotify';\r\n\r\nexport default async (_, res) => {\r\n  const response = await getNowPlaying();\r\n\r\n  if (response.status === 204 || response.status > 400) {\r\n    return res.status(200).json({ isPlaying: false });\r\n  }\r\n\r\n  const song = await response.json();\r\n  const isPlaying = song.is_playing;\r\n  const title = song.item.name;\r\n  const artist = song.item.artists.map((_artist) => _artist.name).join(', ');\r\n  const album = song.item.album.name;\r\n  const albumImageUrl = song.item.album.images[0].url;\r\n  const songUrl = song.item.external_urls.spotify;\r\n\r\n  res.setHeader(\r\n    'Cache-Control',\r\n    'public, s-maxage=60, stale-while-revalidate=30'\r\n  );\r\n\r\n  return res.status(200).json({\r\n    album,\r\n    albumImageUrl,\r\n    artist,\r\n    isPlaying,\r\n    songUrl,\r\n    title\r\n  });\r\n};"]},"metadata":{},"sourceType":"module"}